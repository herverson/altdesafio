<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36" version="28.1.0">
  <diagram name="Page-1" id="c4acf3e9-155e-7222-9cf6-157b1a14988f">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" background="#fafafa" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Diagrama de Classes - Sistema de Orçamentos Dinâmicos AltForce" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="600" y="10" width="400" height="30" as="geometry" />
        </mxCell>

        <!-- Row 1: Base Classes -->
        <!-- BaseModel -->
        <mxCell id="basemodel" value="&lt;&lt;abstract&gt;&gt;&#xa;BaseModel" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#f0f8ff;" parent="1" vertex="1">
          <mxGeometry x="50" y="60" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="basemodel-attrs" value="+ String id&#xa;+ String name" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="basemodel" vertex="1">
          <mxGeometry y="40" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="basemodel-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="basemodel" vertex="1">
          <mxGeometry y="80" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="basemodel-methods" value="+ toJson(): Map&lt;String, dynamic&gt;&#xa;+ equals(Object): bool" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="basemodel" vertex="1">
          <mxGeometry y="88" width="200" height="32" as="geometry" />
        </mxCell>

        <!-- BusinessRule -->
        <mxCell id="businessrule" value="&lt;&lt;abstract&gt;&gt;&#xa;BusinessRule" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#f0f8ff;" parent="1" vertex="1">
          <mxGeometry x="350" y="60" width="220" height="140" as="geometry" />
        </mxCell>
        <mxCell id="businessrule-attrs" value="+ String id&#xa;+ String name&#xa;+ int priority&#xa;+ bool isEnabled" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="businessrule" vertex="1">
          <mxGeometry y="40" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="businessrule-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="businessrule" vertex="1">
          <mxGeometry y="100" width="220" height="8" as="geometry" />
        </mxCell>
        <mxCell id="businessrule-methods" value="+ isApplicable(RuleContext): bool&#xa;+ execute(RuleContext): RuleResult" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="businessrule" vertex="1">
          <mxGeometry y="108" width="220" height="32" as="geometry" />
        </mxCell>

        <!-- Row 2: Product and Rules -->
        <!-- Product -->
        <mxCell id="product" value="&lt;&lt;abstract&gt;&gt;&#xa;Product" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#f0f8ff;" parent="1" vertex="1">
          <mxGeometry x="50" y="230" width="200" height="160" as="geometry" />
        </mxCell>
        <mxCell id="product-attrs" value="+ String description&#xa;+ double basePrice&#xa;+ Map&lt;String, dynamic&gt; attributes" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="product" vertex="1">
          <mxGeometry y="40" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="product-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="product" vertex="1">
          <mxGeometry y="90" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="product-methods" value="+ getFormFields(): List&lt;FormFieldConfig&gt;&#xa;+ validate(Map): List&lt;String&gt;&#xa;+ calculateBasePrice(Map): double&#xa;+ productType: String" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="product" vertex="1">
          <mxGeometry y="98" width="200" height="62" as="geometry" />
        </mxCell>

        <!-- PricingRule -->
        <mxCell id="pricingrule" value="&lt;&lt;abstract&gt;&gt;&#xa;PricingRule" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#f0f8ff;" parent="1" vertex="1">
          <mxGeometry x="300" y="230" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="pricingrule-attrs" value="+ ruleType: &quot;pricing&quot;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="pricingrule" vertex="1">
          <mxGeometry y="40" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pricingrule-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="pricingrule" vertex="1">
          <mxGeometry y="60" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="pricingrule-methods" value="+ calculatePriceAdjustment(): double" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="pricingrule" vertex="1">
          <mxGeometry y="68" width="200" height="32" as="geometry" />
        </mxCell>

        <!-- ValidationRule -->
        <mxCell id="validationrule" value="&lt;&lt;abstract&gt;&gt;&#xa;ValidationRule" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#f0f8ff;" parent="1" vertex="1">
          <mxGeometry x="520" y="230" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="validationrule-attrs" value="+ ruleType: &quot;validation&quot;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="validationrule" vertex="1">
          <mxGeometry y="40" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="validationrule-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="validationrule" vertex="1">
          <mxGeometry y="60" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="validationrule-methods" value="+ validateFields(): List&lt;String&gt;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="validationrule" vertex="1">
          <mxGeometry y="68" width="200" height="32" as="geometry" />
        </mxCell>

        <!-- VisibilityRule -->
        <mxCell id="visibilityrule" value="&lt;&lt;abstract&gt;&gt;&#xa;VisibilityRule" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#f0f8ff;" parent="1" vertex="1">
          <mxGeometry x="740" y="230" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="visibilityrule-attrs" value="+ ruleType: &quot;visibility&quot;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="visibilityrule" vertex="1">
          <mxGeometry y="40" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="visibilityrule-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="visibilityrule" vertex="1">
          <mxGeometry y="60" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="visibilityrule-methods" value="+ applyVisibilityChanges(): Map" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="visibilityrule" vertex="1">
          <mxGeometry y="68" width="200" height="32" as="geometry" />
        </mxCell>

        <!-- Row 3: Product Implementations -->
        <!-- IndustrialProduct -->
        <mxCell id="industrial" value="IndustrialProduct" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="50" y="430" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="industrial-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="industrial" vertex="1">
          <mxGeometry y="26" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="industrial-methods" value="+ productType: &quot;industrial&quot;&#xa;+ getFormFields()&#xa;+ validate()" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="industrial" vertex="1">
          <mxGeometry y="34" width="180" height="46" as="geometry" />
        </mxCell>

        <!-- ResidentialProduct -->
        <mxCell id="residential" value="ResidentialProduct" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="250" y="430" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="residential-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="residential" vertex="1">
          <mxGeometry y="26" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="residential-methods" value="+ productType: &quot;residential&quot;&#xa;+ getFormFields()&#xa;+ validate()" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="residential" vertex="1">
          <mxGeometry y="34" width="180" height="46" as="geometry" />
        </mxCell>

        <!-- CorporateProduct -->
        <mxCell id="corporate" value="CorporateProduct" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="450" y="430" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="corporate-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="corporate" vertex="1">
          <mxGeometry y="26" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="corporate-methods" value="+ productType: &quot;corporate&quot;&#xa;+ getFormFields()&#xa;+ validate()" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="corporate" vertex="1">
          <mxGeometry y="34" width="180" height="46" as="geometry" />
        </mxCell>

        <!-- Row 4: Repository Pattern -->
        <!-- IRepository -->
        <mxCell id="irepository" value="&lt;&lt;interface&gt;&gt;&#xa;IRepository&lt;T&gt;" style="swimlane;fontStyle=3;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#e6f3ff;strokeColor=#0066cc;" parent="1" vertex="1">
          <mxGeometry x="50" y="550" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="irepository-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#0066cc;" parent="irepository" vertex="1">
          <mxGeometry y="40" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="irepository-methods" value="+ findAll(): Future&lt;List&lt;T&gt;&gt;&#xa;+ findById(String): Future&lt;T?&gt;&#xa;+ save(T): Future&lt;T&gt;&#xa;+ delete(T): Future&lt;bool&gt;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="irepository" vertex="1">
          <mxGeometry y="48" width="200" height="52" as="geometry" />
        </mxCell>

        <!-- MemoryRepository -->
        <mxCell id="memoryrepo" value="MemoryRepository&lt;T&gt;" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="280" y="550" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="memoryrepo-attrs" value="- Map&lt;String, T&gt; _storage" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="memoryrepo" vertex="1">
          <mxGeometry y="26" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="memoryrepo-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="memoryrepo" vertex="1">
          <mxGeometry y="46" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="memoryrepo-methods" value="+ findAll()&#xa;+ save(T)&#xa;+ delete(T)" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="memoryrepo" vertex="1">
          <mxGeometry y="54" width="200" height="46" as="geometry" />
        </mxCell>

        <!-- ProductRepository -->
        <mxCell id="productrepo" value="ProductRepository" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="510" y="550" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="productrepo-attrs" value="extends MemoryRepository&lt;Product&gt;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;" parent="productrepo" vertex="1">
          <mxGeometry y="26" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="productrepo-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="productrepo" vertex="1">
          <mxGeometry y="46" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="productrepo-methods" value="+ findByType(String)&#xa;+ findByPriceRange()&#xa;- _initializeData()" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="productrepo" vertex="1">
          <mxGeometry y="54" width="200" height="46" as="geometry" />
        </mxCell>

        <!-- Right Side: Engines and Controllers -->
        <!-- RulesEngine -->
        <mxCell id="rulesengine" value="RulesEngine&lt;T&gt;" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="1000" y="60" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="rulesengine-attrs" value="- List&lt;T&gt; _rules" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="rulesengine" vertex="1">
          <mxGeometry y="26" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rulesengine-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="rulesengine" vertex="1">
          <mxGeometry y="46" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="rulesengine-methods" value="+ addRule(T): void&#xa;+ removeRule(String): bool&#xa;+ execute(RuleContext): Result&#xa;+ getRulesByType(String)" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="rulesengine" vertex="1">
          <mxGeometry y="54" width="200" height="66" as="geometry" />
        </mxCell>

        <!-- PricingEngine -->
        <mxCell id="pricingengine" value="PricingEngine" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="1000" y="200" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="pricingengine-attrs" value="extends RulesEngine&lt;PricingRule&gt;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;" parent="pricingengine" vertex="1">
          <mxGeometry y="26" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pricingengine-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="pricingengine" vertex="1">
          <mxGeometry y="46" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="pricingengine-methods" value="+ calculateFinalPrice()" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="pricingengine" vertex="1">
          <mxGeometry y="54" width="180" height="26" as="geometry" />
        </mxCell>

        <!-- ValidationEngine -->
        <mxCell id="validationengine" value="ValidationEngine" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="1200" y="200" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="validationengine-attrs" value="extends RulesEngine&lt;ValidationRule&gt;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;" parent="validationengine" vertex="1">
          <mxGeometry y="26" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="validationengine-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="validationengine" vertex="1">
          <mxGeometry y="46" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="validationengine-methods" value="+ validateAll()" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="validationengine" vertex="1">
          <mxGeometry y="54" width="180" height="26" as="geometry" />
        </mxCell>

        <!-- VisibilityEngine -->
        <mxCell id="visibilityengine" value="VisibilityEngine" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="1000" y="300" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="visibilityengine-attrs" value="extends RulesEngine&lt;VisibilityRule&gt;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;" parent="visibilityengine" vertex="1">
          <mxGeometry y="26" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="visibilityengine-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="visibilityengine" vertex="1">
          <mxGeometry y="46" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="visibilityengine-methods" value="+ applyVisibilityRules()" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="visibilityengine" vertex="1">
          <mxGeometry y="54" width="180" height="26" as="geometry" />
        </mxCell>

        <!-- FormController -->
        <mxCell id="formcontroller" value="FormController&lt;T&gt;" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="1000" y="430" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="formcontroller-attrs" value="- T? _selectedProduct&#xa;- Map&lt;String, dynamic&gt; _formData&#xa;- List&lt;FormFieldConfig&gt; _fields" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="formcontroller" vertex="1">
          <mxGeometry y="26" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="formcontroller-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="formcontroller" vertex="1">
          <mxGeometry y="76" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="formcontroller-methods" value="+ selectProduct(T): void&#xa;+ updateField(String, dynamic)&#xa;+ calculatePrice(): PricingResult&#xa;+ validateAndSubmit(): bool" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="formcontroller" vertex="1">
          <mxGeometry y="84" width="200" height="56" as="geometry" />
        </mxCell>

        <!-- BudgetController -->
        <mxCell id="budgetcontroller" value="BudgetController" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;marginBottom=0;rounded=0;shadow=0;strokeWidth=1;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="1250" y="430" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="budgetcontroller-attrs" value="- FormController? _formController&#xa;- List&lt;Product&gt; _availableProducts&#xa;- PricingResult? _currentPricing" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="budgetcontroller" vertex="1">
          <mxGeometry y="26" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="budgetcontroller-separator" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" parent="budgetcontroller" vertex="1">
          <mxGeometry y="76" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="budgetcontroller-methods" value="+ selectProduct(Product)&#xa;+ submitBudget(): Future&lt;bool&gt;&#xa;+ getBudgetSummary()&#xa;+ clearForm()" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="budgetcontroller" vertex="1">
          <mxGeometry y="84" width="200" height="56" as="geometry" />
        </mxCell>

        <!-- Inheritance Relationships -->
        <!-- Product extends BaseModel -->
        <mxCell id="edge1" parent="1" source="product" target="basemodel" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="150" y="230" as="sourcePoint"/>
            <mxPoint x="150" y="180" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- BusinessRule extends BaseModel -->
        <mxCell id="edge2" parent="1" source="businessrule" target="basemodel" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="120" as="sourcePoint"/>
            <mxPoint x="250" y="120" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Rules extend BusinessRule -->
        <mxCell id="edge3" parent="1" source="pricingrule" target="businessrule" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="230" as="sourcePoint"/>
            <mxPoint x="460" y="200" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge4" parent="1" source="validationrule" target="businessrule" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="620" y="230" as="sourcePoint"/>
            <mxPoint x="460" y="200" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge5" parent="1" source="visibilityrule" target="businessrule" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="840" y="230" as="sourcePoint"/>
            <mxPoint x="460" y="200" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Products extend Product -->
        <mxCell id="edge6" parent="1" source="industrial" target="product" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="140" y="430" as="sourcePoint"/>
            <mxPoint x="150" y="390" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge7" parent="1" source="residential" target="product" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="340" y="430" as="sourcePoint"/>
            <mxPoint x="150" y="390" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge8" parent="1" source="corporate" target="product" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="540" y="430" as="sourcePoint"/>
            <mxPoint x="150" y="390" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Repository relationships -->
        <mxCell id="edge9" parent="1" source="memoryrepo" target="irepository" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="280" y="600" as="sourcePoint"/>
            <mxPoint x="250" y="600" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge10" parent="1" source="productrepo" target="memoryrepo" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="510" y="600" as="sourcePoint"/>
            <mxPoint x="480" y="600" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Engine inheritance -->
        <mxCell id="edge11" parent="1" source="pricingengine" target="rulesengine" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1090" y="200" as="sourcePoint"/>
            <mxPoint x="1100" y="180" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge12" parent="1" source="validationengine" target="rulesengine" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1290" y="200" as="sourcePoint"/>
            <mxPoint x="1100" y="180" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="edge13" parent="1" source="visibilityengine" target="rulesengine" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1090" y="300" as="sourcePoint"/>
            <mxPoint x="1100" y="180" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Composition relationships -->
        <mxCell id="edge14" parent="1" source="budgetcontroller" target="formcontroller" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1250" y="500" as="sourcePoint"/>
            <mxPoint x="1200" y="500" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="LEGENDA:&#xa;────▷ Herança (extends)&#xa;────◆ Composição (uses/has)&#xa;- - - ▷ Implementa Interface&#xa;&#xa;🔵 Interface   🔘 Classe Abstrata   ⚪ Classe Concreta&#xa;&#xa;Genéricos: &lt;T&gt;, &lt;T extends BaseModel&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="50" y="700" width="300" height="120" as="geometry" />
        </mxCell>

        <!-- Patterns Info -->
        <mxCell id="patterns" value="PADRÕES DE DESIGN:&#xa;✓ Strategy Pattern (BusinessRule → Rules)&#xa;✓ Repository Pattern (IRepository&lt;T&gt;)&#xa;✓ Template Method (Product, BusinessRule)&#xa;✓ Factory Pattern (DynamicFormField)&#xa;✓ Observer Pattern (Controllers)&#xa;✓ Composition over Inheritance&#xa;✓ Genéricos Type-Safe&#xa;✓ DRY Principles" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fillColor=#e6ffe6;strokeColor=#00cc00;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="380" y="700" width="250" height="120" as="geometry" />
        </mxCell>

        <!-- Architecture Info -->
        <mxCell id="architecture" value="ARQUITETURA:&#xa;📁 models/products/ → Product + especializações&#xa;📁 models/rules/ → BusinessRule + tipos&#xa;📁 repositories/ → IRepository&lt;T&gt; + implementações&#xa;📁 services/ → RulesEngine&lt;T&gt; + especializações&#xa;📁 controllers/ → Controllers coordenados&#xa;📁 widgets/ → Factory + widgets dinâmicos&#xa;🎯 Estados Interdependentes Reativos&#xa;⚡ Engine de Regras Configuráveis" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fillColor=#fff2e6;strokeColor=#ff9900;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="660" y="700" width="280" height="120" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>